{"version":3,"sources":["app.js"],"names":["createError","require","express","path","cookieParser","logger","session","flash","sequelize","indexRouter","usersRouter","projectsRouter","evaluationRouter","pmEvaluationRouter","peerEvaluationRouter","managementRouter","taskRouter","app","set","join","__dirname","sync","force","then","console","log","err","error","connectionTesting","authenticate","use","json","urlencoded","extended","secret","resave","saveUninitialized","cookie","maxAge","req","res","next","locals","currentUser","user","authorization","flashMessages","message","get","status","render","module","exports"],"mappings":"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","sourcesContent":["// Import module\nvar createError = require('http-errors');\nvar express = require('express');\nvar path = require('path');\nvar cookieParser = require('cookie-parser');\nvar logger = require('morgan');\nvar session = require('express-session');\nvar flash = require('connect-flash');\n\n//Import Model\nconst { sequelize } = require('./models');\n\n\n// Import Router\nvar indexRouter = require('./routes/index');\nvar usersRouter = require('./routes/users');\nvar projectsRouter = require('./routes/projects');\nvar evaluationRouter = require('./routes/evaluation');\nvar pmEvaluationRouter = require('./routes/pm_evaluation');\nvar peerEvaluationRouter = require('./routes/peer_evaluation');\nvar managementRouter = require('./routes/management');\nvar taskRouter = require('./routes/task');\n\n\n// Use express\nvar app = express();\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'pug');\n\nsequelize.sync({ force: false })\n    .then(() => {\n        console.log(\"데이터베이스 연결 성공\");\n    })\n    .catch((err) => {\n        console.error(err);\n    });\n\n// database connection\nasync function connectionTesting() {\n  try {\n    await sequelize.authenticate();\n    console.log('Connection has been established successfully.');\n  } catch (error) {\n    console.error('Unable to connect to the database:', error);\n  }\n}\nconnectionTesting();\n\n// Use Middleware\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\napp.use(express.static(path.join(__dirname, 'front')));\napp.use(session({\n  secret: 'keyboard cat',\n  resave: true,\n  saveUninitialized: true,\n  cookie: { maxAge: 24* 60 * 60 * 1000 } // 24 hours\n}));\napp.use(flash());\n\n// app.use(passport.initialize());\n// app.use(passport.session());\n\napp.use(function(req, res, next) {\n  res.locals.currentUser = req.session.user;\n  res.locals.authorization = req.session.authorization;\n  res.locals.flashMessages = req.flash();\n  next();\n});\n\n\n// Connection Router\napp.use('/', indexRouter);\napp.use('/users', usersRouter);\napp.use('/projects', projectsRouter);\napp.use('/peer_evaluation', peerEvaluationRouter);\napp.use('/pm_evaluation', pmEvaluationRouter);\napp.use('/evaluation', evaluationRouter);\napp.use('/management', managementRouter);\napp.use('/task', taskRouter);\n\n\n// catch 404 and forward to error handler\napp.use(function(req, res, next) {\n  next(createError(404));\n});\n\n// error handler\napp.use(function(err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n  // render the error page\n  res.status(err.status || 500);\n  res.render('error');\n});\n\nmodule.exports = app;\n"],"file":"app.dev.js"}