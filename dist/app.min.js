"use strict";var createError=require("http-errors"),express=require("express"),path=require("path"),cookieParser=require("cookie-parser"),logger=require("morgan"),session=require("express-session"),flash=require("connect-flash"),_require=require("./models"),sequelize=_require.sequelize,indexRouter=require("./routes/index"),usersRouter=require("./routes/users"),projectsRouter=require("./routes/projects"),evaluationRouter=require("./routes/evaluation"),pmEvaluationRouter=require("./routes/pm_evaluation"),peerEvaluationRouter=require("./routes/peer_evaluation"),managementRouter=require("./routes/management"),taskRouter=require("./routes/task"),app=express();function connectionTesting(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(sequelize.authenticate());case 3:console.log("Connection has been established successfully."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Unable to connect to the database:",e.t0);case 9:case"end":return e.stop()}},null,null,[[0,6]])}app.set("views",path.join(__dirname,"views")),app.set("view engine","pug"),sequelize.sync({force:!1}).then(function(){console.log("데이터베이스 연결 성공")}).catch(function(e){console.error(e)}),connectionTesting(),app.use(logger("dev")),app.use(express.json()),app.use(express.urlencoded({extended:!1})),app.use(cookieParser()),app.use(express.static(path.join(__dirname,"public"))),app.use(express.static(path.join(__dirname,"front"))),app.use(session({secret:"keyboard cat",resave:!0,saveUninitialized:!0,cookie:{maxAge:864e5}})),app.use(flash()),app.use(function(e,r,s){r.locals.currentUser=e.session.user,r.locals.authorization=e.session.authorization,r.locals.flashMessages=e.flash(),s()}),app.use("/",indexRouter),app.use("/users",usersRouter),app.use("/projects",projectsRouter),app.use("/peer_evaluation",peerEvaluationRouter),app.use("/pm_evaluation",pmEvaluationRouter),app.use("/evaluation",evaluationRouter),app.use("/management",managementRouter),app.use("/task",taskRouter),app.use(function(e,r,s){s(createError(404))}),app.use(function(e,r,s,a){s.locals.message=e.message,s.locals.error="development"===r.app.get("env")?e:{},s.status(e.status||500),s.render("error")}),module.exports=app;
//# sourceMappingURL=app.min.js.map
